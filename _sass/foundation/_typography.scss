/*
 * Establishes basic global typography.
 * Many suggestions from https://typographyhandbook.com/.
 */

// Establish basic vertical rhythm; all vertical spacing will be a multiple of this
$base-font-size: 1rem;
$base-line-height: 1.5;
$vertical-rhythm: $base-line-height * $base-font-size;

$fonts-serif: 'Crimson Pro', Georgia, serif;
$fonts-sans-serif: Lato, Roboto, sans-serif;

// Heading sizes based on a golden-ratio modular scale
$header-ratio: 1.618;
$header-sqrt: 1.272;
$header-ratio-small: 1.4;
$header-sqrt-small: 1.183;

// Base font size scaled up to ~18px default
html {
  font-size: 120%;
  color: $color-text;
}

.content-wrapper {
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  margin: $vertical-rhythm auto 2em auto;
  max-width: 40em;
}

p, li {
  font-size: $base-font-size;
  font-family: $fonts-serif;
  line-height: $base-line-height;
}

p {
  margin-bottom: $vertical-rhythm;
}

h1, h2, h3 {
  font-family: $fonts-sans-serif;
  font-weight: 700;
}

h1, h2 {
  margin-bottom: $vertical-rhythm;
}

h3 {
  margin-bottom: 0;
}

// Increase the vertical space between a paragraph and a heading
p + h1, p + h2 {
  margin-top: 2 * $vertical-rhythm;
}

p + h3 {
  margin-top: 1.5 * $vertical-rhythm;
}


// Heading sizes based on a golden-ratio modular scale
h1 {
  font-size: $base-font-size * $header-ratio * $header-ratio;
  text-align: center;
  max-width: 16em;
  padding: 0 1rem 0 1rem;
  margin: 1rem auto 1rem auto;
}

h2 {
  font-size: $base-font-size * $header-ratio;
}

h3 {
  font-size: $base-font-size * $header-sqrt;
}

// Use a lower header size ratio and smaller text for small screens
@media screen and (max-width: 700px) {
  html {
    font-size: 110%;
  }

  h1 {
    font-size: $base-font-size * $header-ratio-small * $header-ratio-small;
  }

  h2 {
    font-size: $base-font-size * $header-ratio-small;
  }

  h3 {
    font-size: $base-font-size * $header-sqrt-small;
  }
}

// Style links
a:link, a:visited {
  color: $color-link-main;
}

a:hover {
  color: $color-link-hover;
}

a:active {
  color: $color-link-active;
}

::selection {
  background-color: $color-select;
  color: $color-select-fg;
}

figcaption {
  text-align: center;
  font-size: 80%;
  font-family: $fonts-serif;
  font-style: italic;
}

// Prevents <em> from changing line spacing, for some reason
em {
  font-size: 98%;
}

// Mathjax
.math-mobile {
  display: none;
}

// Show multi-line versions of long equations on mobile
@media only screen and (max-width: 768px) {
  .math-wide {
    display: none;
  }

  .math-mobile {
    display: initial;
  }
}
